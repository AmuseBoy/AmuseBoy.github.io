{"meta":{"title":"我的博客","subtitle":"菜鸟一枚，突然想到是时候提高自己了","description":"毕业于山东师范大学，目前在北京工作","author":"Amuse Boy","url":"http://yoursite.com","root":"/"},"pages":[{"title":"categories","date":"2020-06-19T08:57:21.000Z","updated":"2020-06-19T12:14:39.055Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"archives","date":"2020-06-19T10:59:57.000Z","updated":"2020-06-19T12:14:55.733Z","comments":true,"path":"archives/index.html","permalink":"http://yoursite.com/archives/index.html","excerpt":"","text":""},{"title":"tags","date":"2020-06-19T07:59:02.000Z","updated":"2020-06-19T12:13:46.914Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"DRDS数据源切换","slug":"DRDS数据源切换","date":"2020-06-22T10:03:16.000Z","updated":"2020-06-22T13:18:17.970Z","comments":true,"path":"2020/06/22/DRDS数据源切换/","link":"","permalink":"http://yoursite.com/2020/06/22/DRDS%E6%95%B0%E6%8D%AE%E6%BA%90%E5%88%87%E6%8D%A2/","excerpt":"","text":"","categories":[{"name":"技术","slug":"技术","permalink":"http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"drds","slug":"drds","permalink":"http://yoursite.com/tags/drds/"}]},{"title":"DRDS使用问题归集","slug":"DRDS使用问题归集","date":"2020-06-22T09:30:59.000Z","updated":"2020-06-22T10:32:32.200Z","comments":true,"path":"2020/06/22/DRDS使用问题归集/","link":"","permalink":"http://yoursite.com/2020/06/22/DRDS%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E5%BD%92%E9%9B%86/","excerpt":"","text":"DRDS简介 drds是阿里的分库分表的数据库 DRDS使用过程中遇到的问题 DRDS不支持相关的sql语法 drds不支持类似这种语法，select (@i:=@i+1) as no from (select @i:=0) as it; 如果代码中要求查询数据库返回序号的情况，需要在代码中实现。 DRDS批量执行sql报错 我们在代码中需要批量插入数据。一般情况有2种方式。 第一种：insert into xxx values (a,b,c),(c,d,e); 第二种：insert into xxx values (a,b,c);insert into xxx values (c,d,e); 我们并不建议使用第二种方式，但是RDS是支持第二种方式批量插入。 []: 我们在使用DRDS数据库插入时，却报错了，错误代码如： Cause: java.sql.SQLException: [10bf434b34020000-2][172.16.163.190:3306][jx_drds]TddlNestableRuntimeExceptio 该问题是阿里的DRDS内部程序bug,需要寻求技术解决。 DRDS切换数据源 见DRDS数据源切换 DRDS批量插入数据库失败 报错：[TDDL-4603][ERR_ACCROSS_DB_TRANSACTION] Transaction accross db is not supported in current 大意是事物不能跨越数据库，仔细研究代码发现，我是批量插入数据库。sql: insert into student(name,grade,age)values (&#39;a&#39;,&#39;b&#39;,&#39;c&#39;);insert into student(name,grade,age)values (&#39;d&#39;,&#39;e&#39;,&#39;f&#39;); 其中grade字段为sharding-key,即为拆分键，上面的sql根据拆分键需要在不同的数据库进行执行，但是DRDS不支持分布式事物，所以报上述的错误。 我们在代码中如果遇到类似的问题，需要拆分多个事物进行操作。","categories":[{"name":"技术","slug":"技术","permalink":"http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"drds","slug":"drds","permalink":"http://yoursite.com/tags/drds/"},{"name":"错误","slug":"错误","permalink":"http://yoursite.com/tags/%E9%94%99%E8%AF%AF/"}]},{"title":"spring的代理","slug":"spring的代理","date":"2020-06-19T09:02:07.000Z","updated":"2020-06-19T10:14:09.108Z","comments":true,"path":"2020/06/19/spring的代理/","link":"","permalink":"http://yoursite.com/2020/06/19/spring%E7%9A%84%E4%BB%A3%E7%90%86/","excerpt":"","text":"","categories":[{"name":"技术","slug":"技术","permalink":"http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"}]},{"title":"hexo搭建个人博客","slug":"hexo搭建个人博客","date":"2020-06-19T02:34:30.000Z","updated":"2020-06-19T11:41:48.787Z","comments":true,"path":"2020/06/19/hexo搭建个人博客/","link":"","permalink":"http://yoursite.com/2020/06/19/hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/","excerpt":"1. 工具准备 本地git工具，使用git bash客户端命令行操作","text":"1. 工具准备 本地git工具，使用git bash客户端命令行操作 本地安装node.js，并安装npm包管理器 注册www.github.com的账号 2. 搭建博客下载hexo工具包1npm install -g hexo 初始化博客目录12cd E:\\AmuseBoy.github.io #博客根目录就是AmuseBoy.github.iohexo init #hexo会生成相关的依赖和文件目录等 启动本地博客12hexo g #编译代码hexo s #启动服务,访问 http://localhost:4000/查看页面 上传至github首先在github网站，创建一个项目叫AmuseBoy.github.io , AmuseBoy是github用户名。另外本地博客的文件夹根目录必须也是叫AmuseBoy.github.io，必须一致。在博客的目录下，配置_config.yml文件，增加以下内容, 1234deploy: type: git repo: https://github.com/AmuseBoy/AmuseBoy.github.io.git branch: master 下载hexo-deployer-git插件,用于上传并部署博客代码。 1npm install hexo-deployer-git --save 开始上传代码 1hexo d 然后使用github的三级域名，打开自己的博客网页:https://amuseboy.github.io/ 3. 常用的hexo命令12345678hexo new \"如何像马云一样有钱\" #创建新文章hexo new page \"pageName\" #新建一个页面 hexo generate #编译生成html页面hexo server #启动本地博客服务，端口默认4000hexo deploy #上传服务到githubhexo help #查看帮助hexo version #查看hexo的版本hexo clean #清除缓存文件 db.json 和已生成的静态文件 public 缩写 1234hexo n &#x3D;&#x3D; hexo newhexo g &#x3D;&#x3D; hexo generatehexo s &#x3D;&#x3D; hexo serverhexo d &#x3D;&#x3D; hexo deploy 4. hexo图片的使用写博客时，在引入图片会不免使用绝对路径来引入图片，这种方式很不好管理。我们使用相对路径来管理我们的图片，首先更改成如下配置：_config.yml, post_asset_folder:true 下载插件： 1npm install https://github.com/CodeFalling/hexo-asset-image --save 执行命令 $ hexo new post_name，在 source/_posts 中会生成文章 post_name.md 和同名文件夹 post_name。将图片资源放在 post_name 中，文章就可以使用相对路径引用图片资源了,如/hexo搭建个人博客/hexo-post-1.png.","categories":[],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"},{"name":"博客","slug":"博客","permalink":"http://yoursite.com/tags/%E5%8D%9A%E5%AE%A2/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-06-13T08:40:08.438Z","updated":"2020-06-19T10:59:08.124Z","comments":true,"path":"2020/06/13/hello-world/","link":"","permalink":"http://yoursite.com/2020/06/13/hello-world/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}],"categories":[{"name":"技术","slug":"技术","permalink":"http://yoursite.com/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"drds","slug":"drds","permalink":"http://yoursite.com/tags/drds/"},{"name":"错误","slug":"错误","permalink":"http://yoursite.com/tags/%E9%94%99%E8%AF%AF/"},{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"},{"name":"博客","slug":"博客","permalink":"http://yoursite.com/tags/%E5%8D%9A%E5%AE%A2/"}]}